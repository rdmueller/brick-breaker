namespace SpriteKind {
    export const brick = SpriteKind.create()
    export const ball = SpriteKind.create()
}

sprites.onOverlap(SpriteKind.ball, SpriteKind.brick, function on_on_overlap(sprite2: Sprite, otherSprite2: Sprite) {
    
    otherSprite2.destroy(effects.disintegrate, 200)
    numBlocks += -1
    diffx = Math.abs(sprite2.x - otherSprite2.x)
    diffy = Math.abs(sprite2.y - otherSprite2.y) * 2
    if (diffx > diffy) {
        ballsprite.vx = ballsprite.vx * -1
    } else if (sprite2.y > otherSprite2.y) {
        ballsprite.vy = randint(50, 100)
    } else {
        ballsprite.vy = randint(-50, -100)
    }
    
    score += 10
    music.knock.play()
    if (numBlocks == 0) {
        level += 1
        getLevel(level)
        resetBallAndBat()
        drawLevel()
        updateLevel()
    }
    
    scoresprite.setText("Score: " + ("" + ("" + score)))
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function on_a_pressed() {
    
    controller.moveSprite(ballsprite, 0, 0)
    vx = randint(50, 100)
    ballsprite.setVelocity(vx, randint(-50, -100))
})
function resetBallAndBat() {
    ballsprite.setPosition(80, 101)
    bat.setPosition(80, 112)
    controller.moveSprite(bat, 100, 0)
    controller.moveSprite(ballsprite, 100, 0)
    ballsprite.setVelocity(0, 0)
    let vx = 0
}

function drawLevel() {
    
    y = 0
    while (y <= brickmap.length - 1) {
        x = 0
        while (x <= 9 - 1) {
            if (brickmap[y][x] != 0) {
                sprite22 = assets.image`
                    brick1
                `
                if (brickmap[y][x] == 1) {
                    sprite22 = assets.image`
                        brick1
                    `
                }
                
                if (brickmap[y][x] == 2) {
                    sprite22 = assets.image`
                        brick2
                    `
                }
                
                if (brickmap[y][x] == 3) {
                    sprite22 = assets.image`
                        brick3
                    `
                }
                
                if (brickmap[y][x] == 4) {
                    sprite22 = assets.image`
                        brick4
                    `
                }
                
                if (brickmap[y][x] == 5) {
                    sprite22 = assets.image`
                        brick5
                    `
                }
                
                if (brickmap[y][x] == 6) {
                    sprite22 = assets.image`
                        brick6
                    `
                }
                
                if (brickmap[y][x] == 7) {
                    sprite22 = assets.image`
                        brick7
                    `
                }
                
                if (brickmap[y][x] == 8) {
                    sprite22 = assets.image`
                        brick8
                    `
                }
                
                if (brickmap[y][x] == 9) {
                    sprite22 = assets.image`
                        brick9
                    `
                }
                
                if (brickmap[y][x] == 10) {
                    sprite22 = assets.image`
                        brick10
                    `
                }
                
                mySprite = sprites.create(sprite22, SpriteKind.brick)
                mySprite.setPosition(16 + x * 16, 30 + y * 8)
                numBlocks += 1
            }
            
            x += 1
        }
        y += 1
    }
}

sprites.onOverlap(SpriteKind.ball, SpriteKind.Player, function on_on_overlap2(sprite: Sprite, otherSprite: Sprite) {
    
    sprite.vy = randint(-50, -100)
    score += 1
    music.thump.play()
    scoresprite.setText("Score: " + ("" + ("" + score)))
})
function updateLevel() {
    
    levelText = textsprite.create("Lvl: " + ("" + level), 0, 4)
    levelText.setPosition(137, 5)
    levelText.setOutline(1, 11)
}

function updateLives() {
    
    livesText = textsprite.create("B: " + ("" + lives), 0, 4)
    livesText.setPosition(14, 5)
    livesText.setOutline(1, 5)
}

function getLevel(num: number): number[][] {
    
    if (num == 1) {
        brickmap = [[0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 1, 4, 1, 4, 1, 4, 1, 0], [0, 4, 1, 4, 1, 4, 1, 4, 0], [0, 1, 4, 1, 4, 1, 4, 1, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0]]
    }
    
    if (num == 2) {
        brickmap = [[0, 0, 0, 3, 3, 3, 0, 0, 0], [0, 0, 3, 0, 0, 0, 3, 0, 0], [0, 3, 0, 0, 0, 0, 0, 3, 0], [0, 3, 0, 0, 0, 0, 0, 3, 0], [0, 0, 3, 0, 0, 0, 3, 0, 0], [0, 0, 0, 3, 3, 3, 0, 0, 0]]
    }
    
    if (num == 3) {
        brickmap = [[0, 0, 0, 0, 0, 0, 0, 0, 0], [7, 7, 7, 7, 7, 7, 7, 7, 7], [7, 7, 7, 7, 7, 7, 7, 7, 7], [0, 0, 0, 0, 0, 0, 0, 0, 0], [9, 9, 9, 9, 9, 9, 9, 9, 9], [9, 9, 9, 9, 9, 9, 9, 9, 9], [0, 0, 0, 0, 0, 0, 0, 0, 0]]
    }
    
    if (num == 4) {
        brickmap = [[1, 0, 2, 0, 3, 0, 4, 0, 5], [0, 2, 0, 3, 0, 4, 0, 5, 0], [2, 0, 3, 0, 4, 0, 5, 0, 6], [0, 3, 0, 4, 0, 5, 0, 6, 0], [3, 0, 4, 0, 5, 0, 6, 0, 7], [0, 4, 0, 5, 0, 6, 0, 7, 0]]
    }
    
    if (num == 5) {
        brickmap = [[0, 0, 0, 8, 8, 8, 0, 0, 0], [0, 0, 8, 8, 8, 8, 8, 0, 0], [0, 8, 7, 8, 8, 8, 7, 8, 0], [0, 8, 8, 8, 8, 8, 8, 8, 0], [0, 8, 7, 8, 8, 8, 7, 8, 0], [0, 0, 8, 7, 7, 7, 8, 0, 0], [0, 0, 0, 8, 8, 8, 0, 0, 0]]
    }
    
    return brickmap
}

let livesText : TextSprite = null
let levelText : TextSprite = null
let mySprite : Sprite = null
let sprite22 : Image = null
let x = 0
let brickmap : number[][] = []
let y = 0
let diffy = 0
let diffx = 0
let lives = 0
let vx = 0
let ballsprite : Sprite = null
let bat : Sprite = null
let score = 0
let scoresprite : TextSprite = null
let sprite3 = null
music.sonar.play()
scene.setBackgroundImage(img`
    3333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
        3333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
        3333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
        3333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
        3333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
        3333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
        3333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
        3333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
        3333333333d111d33333333333333333333333333333333333d111d33333333333333333333333333333333333d111d33333333333333333333333333333333333d111d3333333333333333333333333
        33333333d1111111d3333333333333333333333333333333d1111111d3333333333333333333333333333333d1111111d3333333333333333333333333333333d1111111d33333333333333333333333
        3333333d111111111d33333333333333333333333333333d111111111d33333333333333333333333333333d111111111d33333333333333333333333333333d111111111d3333333333333333333333
        3333333111111111113d111d33333333333333333333333111111111113d111d33333333333333333333333111111111113d111d33333333333333333333333111111111113d111d3333333333333333
        333333d11111111111d111111333333333333333333333d11111111111d111111333333333333333333333d11111111111d111111333333333333333333333d11111111111d111111333333333333333
        33333dd111111111111111111d33d111111d333333333dd111111111111111111d33d111111d333333333dd111111111111111111d33d111111d333333333dd111111111111111111d33d111111d3333
        33d11ddd11111111111111111dd1111111111d3333d11ddd11111111111111111dd1111111111d3333d11ddd11111111111111111dd1111111111d3333d11ddd11111111111111111dd1111111111d33
        3111111d11111111111111111d111111111111d33111111d11111111111111111d111111111111d33111111d11111111111111111d111111111111d33111111d11111111111111111d111111111111d3
        11111111d111111111113111111111111111111d11111111d111111111113111111111111111111d11111111d111111111113111111111111111111d11111111d111111111113111111111111111111d
        1111111111111111111a5a1111111119111111111111111111111111111a5a1111111119111111111111111111111111111a5a1111111119111111111111111111111111111a5a111111111911111111
        111111111111111133a353a33111119991111111111111111111111133a353a33111119991111111111111111111111133a353a33111119991111111111111111111111133a353a33111119991111111
        3111111111111111a3555553a11111191111113a3111111111111111a3555553a11111191111113a3111111111111111a3555553a11111191111113a3111111111111111a3555553a11111191111113a
        a1111111911111111a55555a11111111111111a5a1111111911111111a55555a11111111111111a5a1111111911111111a55555a11111111111111a5a1111111911111111a55555a11111111111111a5
        3a3111199911111111a555a11111111111113a353a3111199911111111a555a11111111111113a353a3111199911111111a555a11111111111113a353a3111199911111111a555a11111111111113a35
        55a111119111111111a535a1111111111111a55555a111119111111111a535a1111111111111a55555a111119111111111a535a1111111111111a55555a111119111111111a535a1111111111111a555
        5a11111111111111113a3a311111111111111a555a11111111111111113a3a311111111111111a555a11111111111111113a3a311111111111111a555a11111111111111113a3a311111111111111a55
        5a11111111111111111111111111111111111a535a11111111111111111111111111111111111a535a11111111111111111111111111111111111a535a11111111111111111111111111111111111a53
        a31111111111111111111111aaaa1111111113a3a31111111111111111111111aaaa1111111113a3a31111111111111111111111aaaa1111111113a3a31111111111111111111111aaaa1111111113a3
        1111111111aa11111111111a355aa111111111111111111111aa11111111111a355aa111111111111111111111aa11111111111a355aa111111111111111111111aa11111111111a355aa11111111111
        111111111a35a1111191111a5555aa11aaaaa111111111111a35a1111191111a5555aa11aaaaa111111111111a35a1111191111a5555aa11aaaaa111111111111a35a1111191111a5555aa11aaaaa111
        11111111a555a1111999111a55555aaa35555a1111111111a555a1111999111a55555aaa35555a1111111111a555a1111999111a55555aaa35555a1111111111a555a1111999111a55555aaa35555a11
        111aaaaaa555a1111191111a5555533555555a11111aaaaaa555a1111191111a5555533555555a11111aaaaaa555a1111191111a5555533555555a11111aaaaaa555a3111191111a5555533555555a11
        11a555533955a1111111111a3555555995555a1111a555533955a1111111111a3555555995555a1111a555533955a1111111111a3555555995555a1111a555533955a3111111111a3555555995555a11
        11a5555555553a111111111aa55555599555aa1111a5555555553a311111111aa55555599555aa1111a5555555553a311111111aa55555599555aa1111a5555555553a311111111aa55555599555aa11
        11aa5555555553a11111111aa55555555553a31111aa5555555553a11111111aa55555555553a11111aa5555555553a31111111aa55555555553a11111aa5555555553a11111111aa55555555553a111
        111aa5555555555a111111aa355555555553aa11113aa5555555555a111111aa355555555553aa11111aa5555555555a111111aa355555555553aa11111aa5555555555a111111aa355555555553aa11
        111aa55555555555a1111aa55555555555553aa1113aa55555555555a1111aa55555555555553aa1111aa55555555555a1111aa55555555555553aa1111aa55555555555a1111aa55555555555553aa1
        11aa55555555555aaa11a35555555555555555a313aa55555555555aaa11a35555555555555555a111aa55555555555aaa11a35555555555555555a111aa55555555555aaa11a35555555555555555a1
        11a555555555553a39aa3555555555555555553399a555555555553a39aa3555555555555555553399a555555555553a39aa3555555555555555553311a555555555553a39aa35555555555555555533
        31a5555555553aaa993a5555555555555555539939a5555555553aaa993a5555555555555555539939a5555555553aaa993a5555555555555555539939a5555555553aaa993a55555555555555555399
        3333555335553339999a355555555555555533993333555335553339999a355555555555555533993333555335553339999a355555555555555533993333555335553339999a35555555555555553399
        9333aaaa35553335599a333aaa355555555539999333aaaa35553335599a333aaa355555555539999333aaaa35553335599a333aaa355555555539999333aaaa35553335599a333aaa35555555553999
        9333399aa55999955993aaaaaaa55555333339999333399aa55999955993aaaaaaa55555333339999333399aa55999955993aaaaaaa55555333339999333399aa55999955993aaaaaaa5555533333999
        99999399aa5999999999999a9aa55555a999999999999399aa5999999999999a9aa55555a999999999999399aa5999999999999a9aa55555a999999999999399aa5999999999999a9aa55555a9999999
        999933999aa399999999999393a55553a3999999999933999aa399999999999393a55553a3999999999933999aa399999999999393a55553a3999999999933999aa399999999999393a55553a3999999
        9993339999933999999999939335555a333999999993339999933999999999939335555a333999999993339999933999999999939335555a333999999993339999933999999999939335555a33399999
        9933399999933999999993339333553399339999993339999993399999999333933355339933999999333999999339999999933393335533993399999933399999933999999993339333553399339999
        9933999999939999999993399933333999339999993399999993999999999339993333399933999999339999999399999999933999333339993399999933999999939999999993399933333999339999
        9993999999939993399993999999339999399933999399999993999339999399999933999939993399939999999399933999939999993399993999339993999999939993399993999999339999399933
        3993999999939933339993999999999999399333399399999993993333999399999999999939933339939999999399333399939999999999993993333993999999939933339993999999999999399333
        3333999999933333333993999999999999333399333399999993333333399399999999999933339933339999999333333339939999999999993333993333999999933333333993999999999999333399
        3333999999933399933333999999999999333999333399999993339993333399999999999933399933339999999333999333339999999999993339993333999999933399933333999999999999333999
        9999999999999999993339999999999999999999999999999999999999333999999999999999999999999999999999999933399999999999999999999999999999999999993339999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999991119999999999999999999999999999999999999111999999999999999999999999999999999999911199999999999999999999999999999999999991119999999999
        9999999999999999999999999111111199999999999999999999999999999999911111119999999999999999999999999999999991111111999999999999999999999999999999999111111199999999
        9999999999999999999999991111111119999999999999999999999999999999111111111999999999999999999999999999999911111111199999999999999999999999999999991111111119999999
        9999999999999999999999911111111111991119999999999999999999999991111111111199111999999999999999999999999111111111119911199999999999999999999999911111111111991119
        1999999999999999999999911111111111911111199999999999999999999991111111111191111119999999999999999999999111111111119111111999999999999999999999911111111111911111
        1999911111199999999999911111111111111111199991111119999999999991111111111111111119999111111999999999999111111111111111111999911111199999999999911111111111111111
        1991111111111999999119991111111111111111199111111111199999911999111111111111111119911111111119999991199911111111111111111991111111111999999119991111111111111111
        1911111111111199911111191111111111111111191111111111119991111119111111111111111119111111111111999111111911111111111111111911111111111199911111191111111111111111
        1111111111111119111111119111111111111111111111111111111911111111911111111111111111111111111111191111111191111111111111111111111111111119111111119111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
`)
color.setPalette(color.originalPalette)
scroller.scrollBackgroundWithSpeed(-10, 0)
tiles.setTilemap(tilemap`
    level1
`)
scoresprite = textsprite.create("Score: 0", 0, 4)
scoresprite.setPosition(60, 5)
scoresprite.setOutline(1, 2)
score = 0
let numBlocks = 0
bat = sprites.create(assets.image`
    paddle
`, SpriteKind.Player)
bat.setFlag(SpriteFlag.GhostThroughWalls, true)
bat.setStayInScreen(true)
ballsprite = sprites.create(assets.image`
    ball
`, SpriteKind.ball)
ballsprite.setStayInScreen(false)
ballsprite.setBounceOnWall(false)
lives = 3
updateLives()
let level = 1
getLevel(level)
drawLevel()
updateLevel()
resetBallAndBat()
game.onUpdateInterval(100, function on_update_interval() {
    
    console.logValue("ballx", ballsprite.x)
    console.logValue("velox", vx)
    if (ballsprite.x <= 12) {
        vx = Math.abs(vx)
        ballsprite.vx = vx
        console.log(1)
    }
    
    if (ballsprite.x >= scene.screenWidth() - 12) {
        console.logValue("velox1", vx)
        vx = Math.abs(vx) * -1
        console.logValue("velox2", vx)
        ballsprite.vx = vx
        console.log("bounce")
    }
    
    if (ballsprite.y <= 30) {
        ballsprite.vy = Math.abs(ballsprite.vy)
        console.log(2)
    }
    
    if (ballsprite.bottom >= scene.screenHeight() - 8) {
        lives += -1
        updateLives()
        music.sonar.play()
        resetBallAndBat()
    }
    
})
